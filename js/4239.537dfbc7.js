"use strict";(self.webpackChunkvue3_antd_admin=self.webpackChunkvue3_antd_admin||[]).push([[4239,1806,1196,6954,1927,7886,4683,9451,4876],{76496:function(e,t,n){n.a(e,(async function(e,l){try{n.d(t,{Af:function(){return i},RD:function(){return c},ZT:function(){return u},_8:function(){return d}});var r=n(4064),a=n(57314),o=e([r]);function i(){return(0,r.W)({url:a.default.list,method:"get"})}function u(e){return(0,r.W)({url:a.default.add,method:"post",data:e},{successMsg:"创建成功"})}function d(e){return(0,r.W)({url:a.default.update,method:"post",data:e},{successMsg:"更新成功"})}function c(e){return(0,r.W)({url:a.default.delete,method:"post",data:e},{successMsg:"删除成功"})}r=(o.then?(await o)():o)[0],l()}catch(s){l(s)}}))},12746:function(e,t,n){n.d(t,{BQ:function(){return a},bl:function(){return r},fl:function(){return l}});n(85827);const l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.filter((e=>e.parentId===t)).map((r=>{const a=n.concat(t||[]),o=l(e,r.id,a);return Object.assign(r,{keyPath:a,title:r.name,key:r.id,value:r.id,formData:r,children:o.length?o:null})}))},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.filter((e=>e.parentId===t)).map((l=>{const a=n.concat(t||[]),o=r(e,l.id,a);return Object.assign(l,{keyPath:a,title:l.name,key:l.id,value:l.id,formData:l,children:o.length?o:null})}))},a=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"id",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"children";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(((l,r)=>{var o;return r[t]===e?r:l||(null!==(o=r[n])&&void 0!==o&&o.length?a(e,r[n],t,n):void 0)}),void 0)}},81170:function(e,t,n){n.d(t,{n:function(){return a}});var l=n(66252),r=n(2262);function a(e,t){return{initSortable:function(){(0,l.Y3)((async()=>{if(!e)return;(await n.e(1474).then(n.bind(n,51474))).default.create((0,r.SU)(e),{animation:500,delay:400,delayOnTouchOnly:!0,...t})}))}}}},72791:function(e,t,n){n.d(t,{T:function(){return c}});var l=n(82482),r=(n(57658),n(48675),n(63408),n(14590),n(3462),n(93162)),a=n(84105);class o{constructor(){(0,l.Z)(this,"SheetNames",[]),(0,l.Z)(this,"Sheets",{})}}function i(e,t){t&&(e+=1462);return(Date.parse(e)-new Date(Date.UTC(1899,11,30)).getTime())/864e5}function u(e){const t={},n={s:{c:1e7,r:1e7},e:{c:0,r:0}};for(let l=0;l!=e.length;++l)for(let r=0;r!=e[l].length;++r){n.s.r>l&&(n.s.r=l),n.s.c>r&&(n.s.c=r),n.e.r<l&&(n.e.r=l),n.e.c<r&&(n.e.c=r);const o={v:e[l][r],t:"",z:""};if(null==o.v)continue;const u=a.P6.encode_cell({c:r,r:l});"number"==typeof o.v?o.t="n":"boolean"==typeof o.v?o.t="b":o.v instanceof Date?(o.t="n",o.z=a.kS._table[14],o.v=i(o.v)):o.t="s",t[u]=o}return n.s.c<1e7&&(t["!ref"]=a.P6.encode_range(n)),t}function d(e){const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t!=e.length;++t)n[t]=255&e.charCodeAt(t);return t}function c(){let{multiHeader:e=[],header:t=[],data:n=[],filename:l="excel-list",merges:i=[],autoWidth:c=!0,bookType:s="xlsx"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l=l||"excel-list",n=[...n],n.unshift(t);for(let t=e.length-1;t>-1;t--)n.unshift(e[t]);const p="SheetJS",f=new o,h=u(n);if(i.length>0&&(h["!merges"]||(h["!merges"]=[]),i.forEach((e=>{h["!merges"].push(a.P6.decode_range(e))}))),c){const e=n.map((e=>e.map((e=>null==e?{wch:10}:e.toString().charCodeAt(0)>255?{wch:2*e.toString().length}:{wch:e.toString().length})))),t=e[0];for(let n=1;n<e.length;n++)for(let l=0;l<e[n].length;l++)t[l].wch<e[n][l].wch&&(t[l].wch=e[n][l].wch);h["!cols"]=t}f.SheetNames.push(p),f.Sheets[p]=h;const m=(0,a.cW)(f,{bookType:s,bookSST:!1,type:"binary"});(0,r.saveAs)(new Blob([d(m)],{type:"application/octet-stream"}),`${l}.${s}`)}},90487:function(e,t,n){n.a(e,(async function(e,l){try{var r=n(66252),a=n(2262),o=n(68652),i=n(41806),u=n(66662),d=n(76496),c=n(21502),s=n(46945),p=n(12746),f=e([u,d,c,s]);[u,d,c,s]=f.then?(await f)():f;const h=(0,r.aZ)({name:"SysMenu"});t.Z=(0,r.aZ)({...h,setup(e){const t=(0,a.iH)([]),[n,l]=(0,c.useTable)({search:!1,pagination:!1,size:"small",rowKey:"id",bordered:!0,scroll:{x:2e3}}),[f]=(0,s.U)(),h=async()=>{const e=await(0,d.Af)();return t.value=(0,p.bl)((0,o.Z)(e).filter((e=>2!==e.type)),null),{list:(0,p.bl)((0,o.Z)(e),null)}},m=async e=>{var n,r,o,i;const[c]=await f({modalProps:{title:(e.id?"编辑":"新增")+"菜单",width:700,onFinish:async t=>{var n,r;e.id&&(t.menuId=e.id),1===t.type&&null!==(n=t.viewPath)&&void 0!==n&&n.length&&(t.viewPath=t.viewPath.join("/")),2===t.type&&null!==(r=t.perms)&&void 0!==r&&r.length&&(t.perms=t.perms.map((e=>e.join(":"))).toString()),await(e.id?d._8:d.ZT)(t),l.reload()}},formProps:{labelWidth:100,schemas:u.menuSchemas}});null==c||c.updateSchema([{field:"parentId",componentProps:{treeDefaultExpandedKeys:[-1].concat((null==e?void 0:e.keyPath)||[]),treeData:(0,a.iH)([{id:-1,name:"一级菜单",children:t.value}])}}]),null==c||c.setFieldsValue({...e,icon:null!==(n=e.icon)&&void 0!==n?n:"",perms:null===(r=e.perms)||void 0===r?void 0:r.split(",").filter(Boolean).map((e=>e.split(":"))),viewPath:null===(o=e.viewPath)||void 0===o?void 0:o.split("/"),parentId:null!==(i=e.parentId)&&void 0!==i?i:-1})},v=[...i.baseColumns,{title:"操作",width:160,dataIndex:"ACTION",hideInSearch:!0,align:"center",fixed:"right",actions:e=>{let{record:t}=e;return[{label:"编辑",auth:{perm:"sys.menu.update",effect:"disable"},onClick:()=>m(t)},{label:"删除",auth:"sys.menu.delete",popConfirm:{title:"你确定要删除吗？",onConfirm:()=>(async e=>{await(0,d.RD)({menuId:e.id}),l.reload()})(t)}}]}}];return(e,t)=>{const l=(0,r.up)("a-button");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)((0,a.SU)(n),{"header-title":"菜单管理","data-request":h,columns:v},{toolbar:(0,r.w5)((()=>[(0,r.Wm)(l,{type:"primary",disabled:!e.$auth("sys.menu.add"),onClick:t[0]||(t[0]=e=>m({}))},{default:(0,r.w5)((()=>[(0,r.Uk)(" 新增 ")])),_:1},8,["disabled"])])),_:1})])}}}),l()}catch(e){l(e)}}))},41806:function(e,t,n){n.r(t),n.d(t,{baseColumns:function(){return a}});var l=n(66252),r=n(96461);const a=[{title:"名称",dataIndex:"name",width:240,fixed:"left"},{title:"图标",width:80,dataIndex:"icon",align:"center",customRender:e=>{let{record:t}=e;return t.icon&&(0,l.Wm)((0,l.up)("icon-font"),{type:t.icon,size:"22"},null)}},{title:"类型",width:80,align:"center",dataIndex:"type",customRender:e=>{let{record:t}=e;return(e=>{switch(e){case 0:return"目录";case 1:return"菜单";case 2:return"权限";default:return""}})(t.type)}},{title:"节点路由",dataIndex:"router",align:"center",width:240},{title:"路由缓存",dataIndex:"keepalive",align:"center",width:80,customRender:e=>{let{record:t}=e;return 1===t.type&&(t.keepalive?"是":"否")}},{title:"文件路径",width:280,align:"center",dataIndex:"viewPath"},{title:"权限",width:300,align:"center",dataIndex:"perms",customRender:e=>{var t;let{record:n}=e;return 2==n.type&&(0,l.Wm)("div",null,[null===(t=n.perms)||void 0===t?void 0:t.split(",").map((e=>{return(0,l.Wm)(r.ZP,{color:"blue",key:e},"function"==typeof(t=e)||"[object Object]"===Object.prototype.toString.call(t)&&!(0,l.lA)(t)?e:{default:()=>[e]});var t}))])}},{title:"排序号",width:80,align:"center",dataIndex:"orderNum"},{title:"更新时间",width:180,align:"center",dataIndex:"updatedAt"}]},66662:function(e,t,n){n.a(e,(async function(e,l){try{n.r(t),n.d(t,{menuSchemas:function(){return s}});n(85827);var r=n(79799),a=n(72402),o=n(5143),i=n(66827),u=e([i]);i=(u.then?(await u)():u)[0];const d=e=>1===e,c=e=>2===e,s=[{field:"type",component:"RadioGroup",label:"菜单类型",defaultValue:0,rules:[{required:!0,type:"number"}],componentProps:{options:[{label:"目录",value:0},{label:"菜单",value:1},{label:"权限",value:2}]}},{field:"name",component:"Input",label:e=>{let{formModel:t}=e;return c(t.type)?"权限名称":"节点名称"},rules:[{required:!0,type:"string"}]},{field:"parentId",component:"TreeSelect",label:"上级节点",componentProps:{fieldNames:{label:"name",value:"id"},getPopupContainer:()=>document.body},rules:[{required:!0,type:"number"}]},{field:"router",component:"Input",label:"节点路由",vIf:e=>{let{formModel:t}=e;return!c(t.type)},rules:[{required:!0,type:"string"}]},{field:"perms",component:"Cascader",label:"权限",vIf:e=>{let{formModel:t}=e;return c(t.type)},rules:[{required:!0,type:"array",message:"请选择权限"}],componentProps:{multiple:!0,showCheckedStrategy:r.FJ,options:(0,i.ik)()},componentSlots:{displayRender:e=>{var t;let{slotData:n}=e;return null==n||null===(t=n.labels)||void 0===t?void 0:t.join(":")}}},{field:"viewPath",component:"Cascader",label:"文件路径",vIf:e=>{let{formModel:t}=e;return d(t.type)&&!t.isExt},componentProps:{options:Object.keys(o.a).reduce(((e,t)=>((0,i.Pe)(t,e,"/"),e)),[])},rules:[{required:!0,type:"array"}]},{field:"icon",component:()=>a.default,label:"节点图标",vIf:e=>{let{formModel:t}=e;return!c(t.type)}},{field:"keepalive",component:"Switch",label:"是否缓存",defaultValue:!0,vIf:e=>{let{formModel:t}=e;return d(t.type)}},{field:"isExt",component:"Switch",label:"是否外链",defaultValue:!1,colProps:{span:12},vIf:e=>{let{formModel:t}=e;return d(t.type)}},{field:"openMode",component:"RadioGroup",label:"打开方式",defaultValue:1,vIf:e=>{let{formModel:t}=e;return d(t.type)&&t.isExt},colProps:{span:12},componentProps:{optionType:"button",buttonStyle:"solid",options:[{label:"新窗口打开",value:1},{label:"内嵌页打开",value:2}]}},{field:"isShow",component:"Switch",label:"是否显示",defaultValue:!0,vIf:e=>{let{formModel:t}=e;return!c(t.type)}},{field:"orderNum",component:"InputNumber",label:"排序号",defaultValue:255,componentProps:{style:{width:"100%"}}}];l()}catch(e){l(e)}}))},15168:function(e,t,n){n.a(e,(async function(e,l){try{n.r(t);var r=n(74786),a=e([r]);const o=(r=(a.then?(await a)():a)[0]).Z;t.default=o,l()}catch(e){l(e)}}))},74786:function(e,t,n){n.a(e,(async function(e,l){try{n.d(t,{Z:function(){return r.Z}});var r=n(90487),a=e([r]);r=(a.then?(await a)():a)[0],l()}catch(e){l(e)}}))}}]);